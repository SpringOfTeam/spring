<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>IFE Task22</title>

	<style type="text/css">
	*{
		margin: 0;
		padding: 0;
	}
	body{
		width: 100%;
		height: 100%;
	}
	div{
		border: 1px solid black;
		width: 100%;
		height: 100%;
		padding: 20px;
	}
	.item-4{
		margin-right: 5px;
	}
	.item-1{
		margin-bottom: 30px;
		margin-right: 20px;
	}
	.item-1,.item-2,.item-3{
		/*padding: 20px 15px;*/
		display: flex;
		flex-direction: row;
		margin-right: 5px;
		justify-content: space-around;		
	}
	.flex-root{
		/*padding: 20px;*/
		display: flex;
		flex-direction: column;
		flex-wrap: wrap;
		padding-right: 60px;
	}
	</style>

	<script type="text/javascript">
	window.onload = function(){
		var buttonLeft = document.getElementById("btnPre");
		var buttonCenter = document.getElementById("btnCenter");
		var buttonAfter = document.getElementById("btnAfter");
		buttonLeft.addEventListener("click",run);
		buttonCenter.addEventListener("click",run);
		buttonAfter.addEventListener("click",run);

	}
	/*
	*获取节点存取
	*/
	var stack = [];
	/*
	*preOrder遍历节点存在stack里面
	*
	*前序遍历
	*/
	function preOrder(node) {
		if(node == null){
			return;
		}
		stack.push(node);/*访问根节点*/
		preOrder(node.children[0]);/*访问左节点*/
		preOrder(node.children[1]);	/*访问右节点*/	
	}
	/*
	*中序遍历
	*/
	function midOrder(node) {
		if(node == null){
			return;
		}
		preOrder(node.children[0]);
		stack.push(node);
		preOrder(node.children[1]);		
	}
	/*
	*后序遍历
	*/
	function afterOrder(node) {
		if(node == null){
			return;
		}
		preOrder(node.children[0]);
		preOrder(node.children[1]);
		stack.push(node);	
	}	
	/*
	*动画背景变色,第一设时间函数setInterval
	*/
	function run(evt){
		/*获取根节点*/
		var root = document.getElementById("root");
		/*第一步先遍历树*/
		/*第一个if前序*/
		if(evt.target.id =="btnPre"){
			preOrder(root);
		}else if(evt.target.id =="btnCenter"){
			midOrder(root);
		}else if(evt.target.id =="btnAfter"){
			afterOrder(root);
		}
		/*第二步计时器显示遍历*/
		var i = 0;
		/*计时器标示符*/
		var intervalId;

		/*调整速度*/
		var speed;
		var selctBtn = document.getElementById("sel");
		/*select属性*/
		if (selctBtn.selectedIndex == 0) {
			speed = 500;
		}else if(selctBtn.selectedIndex == 1){ speed = 1000;}
		else if(selctBtn.selectedIndex == 2){ speed = 2000;}


		intervalId = setInterval(function(){
			if (i < stack.length) {
				/*把需要遍历之前的节点都变白*/
				for(var idx = 0 ; idx < i; idx++){
					stack[idx].style.backgroundColor = "";
				}
				stack[i].style.backgroundColor = "blue";
				i++;
			}else{
				/*操作完清除计时器*/
				clearInterval(intervalId);
				stack[i-1].style.backgroundColor = "";
				stack = [];
			}
		},speed);

	}
	</script>

</head>
<body>
	<div class="root" id="root">
		<div class="item-1">
			<div class="item-2">
				<div class="item-3">
					<div class="item-4">4</div>
					<div class="item-4">4</div>
				</div>
				<div class="item-3">
					<div class="item-4">4</div>
					<div class="item-4">4</div>					
				</div>
			</div>
			<div class="item-2">
				<div class="item-3">
					<div class="item-4">4</div>
					<div class="item-4">4</div>
				</div>
				<div class="item-3">
					<div class="item-4">4</div>
					<div class="item-4">4</div>
				</div>				
			</div>
		</div>

		<div class="item-1">
			<div class="item-2">
				<div class="item-3">
					<div class="item-4">4</div>
					<div class="item-4">4</div>
				</div>
				<div class="item-3">
					<div class="item-4">4</div>
					<div class="item-4">4</div>					
				</div>
			</div>
			<div class="item-2">
				<div class="item-3">
					<div class="item-4">4</div>
					<div class="item-4">4</div>
				</div>
				<div class="item-3">
					<div class="item-4">4</div>
					<div class="item-4">4</div>
				</div>				
			</div>
		</div>
	</div>
	<button id="btnPre">先序遍历</button>
	<button id="btnCenter">中序遍历</button>
	<button id="btnAfter">后序遍历</button>
	<select id="sel">
		<option>快</option>
		<option>中</option>
		<option>慢</option>
	</select>
</body>
</html>